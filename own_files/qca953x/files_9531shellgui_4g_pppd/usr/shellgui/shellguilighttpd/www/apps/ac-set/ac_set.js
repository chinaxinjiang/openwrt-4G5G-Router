var confirmMethod={deleteAC:function(a){var t=a.attr("data-mac"),e="app=ac-set&action=remove&mac="+t;Ha.ajax("/","json",e,"post","",function(a){Ha.showNotify(a)},1)}},band,gband=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14],[2.412,2.417,2.422,2.427,2.432,2.437,2.442,2.447,2.452,2.457,2.462,2.467,2.472,2.484],[2.401,2.406,2.411,2.416,2.421,2.426,2.431,2.436,2.441,2.446,2.451,2.456,2.461,2.473],[2.423,2.428,2.433,2.438,2.443,2.448,2.453,2.458,2.463,2.468,2.473,2.478,2.483,2.495]],aband=[[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,149,153,157,161,165],[5.18,5.2,5.22,5.24,5.26,5.28,5.3,5.32,5.5,5.52,5.54,5.56,5.58,5.6,5.62,5.64,5.66,5.68,5.7,5.745,5.765,5.785,5.805,5.825],[5.17,5.19,5.21,5.23,5.25,5.27,5.29,5.31,5.49,5.51,5.53,5.55,5.57,5.59,5.61,5.63,5.65,5.67,5.69,5.735,5.755,5.775,5.795,5.815],[5.19,5.21,5.23,5.25,5.27,5.29,5.31,5.33,5.51,5.53,5.55,5.57,5.59,5.61,5.63,5.65,5.67,5.69,5.71,5.755,5.775,5.795,5.815,5.835]];!function(){function t(){var a=$("#file_name").width();a<208&&(a=208),$(".upload-progress-bar").css("width",a).removeClass("hidden")}function e(a){$("#"+a+"_btn").click(function(){var t=M("ac_container"),e={};e.app="ac-set",e.action=a,e.ap_list=t,Ha.ajax("/","json",e,"post","",function(a){Ha.showNotify(a)},1)})}function n(){$.post("/","app=ac-set&action=get_aps_list",function(a){$("#ac_container").empty();for(var t=0;t<a.length;t++){var e=g(a[t]);$("#ac_container").append(e)}$(".confirm_trigger").click(Components.setConfirmModal),$('[data-target="#editAcModal"]').click(function(){$("#editAcModal").find(".modal-body").empty();var a=$(this).attr("data-data"),t=JSON.parse(a),e=m(t);$("#editAcModal").find(".modal-body").append(e),$("#enc_type").change(function(){var a=$(this).val();"none"==a?$("#key_container").addClass("hidden"):$("#key_container").removeClass("hidden"),$("#key_container").find("input").val("")})}),$("#submit_edit_ac_btn").click(function(){var a=$("#model_input").val(),t=$("#mac_input").val(),e=$("#ver_input").val(),n=$("#ip_input").val(),s=$("#desc_input").val(),i=[],o=$("#enc_type").val(),l=$("#is_bridge").val(),d=$("#enc_key").val();$("#ssid_group").find("input").each(function(){i.push($(this).val())});var r={app:"ac-set",action:"edit_ac",mac:t,model:a,ver:e,ip:n,desc:s,ssid:i,enc:o,is_bridge:l,key:d};Ha.ajax("/","json",r,"post","",function(a){Ha.showNotify(a),a.status||$("#editAcModal").modal("hide")},1)}),$('[data-target="#clientModal"]').click(function(){$("#select_all_client").prop("checked",!1),$("#client_container").html("Loading...");var a=$(this).attr("data-mac"),t={app:"ac-set",action:"get_ap_clients",mac:a};$.post("/",t,function(t){if($("#client_container").empty(),!t)return void $("#client_container").html("未发现设备。");var e='<div class="table-responsive"><table class="table"><thead><tr><th></th><th>Signal</th><th>Mac/IP</th><th>Rate</th><th>operate</th></tr></thead><tbody id="client_table"></tbody></table></div>';$("#client_container").append(e);for(var n in t){var s=t[n].IP?t[n].IP:"设备未设置",i=n.replace(/:/g,""),o='<tr><td><input type="checkbox" data-mac="'+n+'"></td><td><div class="" id="sta-item-'+i+'"><div class="rssi-icon"><span></span><span></span><span></span><span></span></div><br><span class="rssi-text"></span></div></td><td><span>Mac:&nbsp;'+n+"</span><br><span>IP:&nbsp;"+s+"</span></td><td><span>Rx:&nbsp;"+t[n].rx_bitrate+"&nbsp;MBit/s</span><br><span>Tx:&nbsp;"+t[n].tx_bitrate+'&nbsp;MBit/s</span></td><td><button data-mac="'+n+'" class="btn btn-danger btn-xs">Kick out</button></td></tr>';$("#client_table").append(o),Ha.setRssiIcon(i,t[n].signal_pct)}w("select_all_client","client_container"),$("#client_table").find("button").click(function(){var t=$(this).attr("data-mac"),e={app:"ac-set",action:"kick_out_client",mac:t,ap_mac:a};$.post("/",e,function(a){Ha.showNotify(a),a.status||$("#clientModal").modal("hide")},"json")})},"json")}),w("selectAll","ac_container"),Ha.setFooterPosition(),$("#ac_container :checkbox,#selectAll").click(function(){C=0,$("#ac_container :checkbox").each(function(){$(this).prop("checked")&&(C+=1)}),C?$("#operate_btn").find("button").prop("disabled",!1):$("#operate_btn").find("button").prop("disabled",!0)}),$(".env-trigger").click(function(){var a=$(this).parent().parent().attr("data-mac"),t=$(this).attr("data-mod");$("#flash-env-btn").attr("data-mac",a),$("#flash-env-btn").attr("data-mod",t),s(a,t)})},"json")}function s(a,t){Ha.mask.show(),$.post("/","app=ac-set&action=get_ap_envs&mac="+a+"&hw="+t,function(a){var e=a.replace(/Success/,"");if(e=e.replace(/\"/g,""),parsedWifiData=i(e),parsedWifiData==-1)Ha.mask.hide(),$("canvas").remove(),Ha.showNotify({status:1,msg:"There_does_not_have_any_SSID"}),$("#envModal").modal("hide");else{Ha.mask.hide();var n=parseInt(t);n<5?(n=2.4,band="2.4GHz",$("#sm-range,#xs-range").addClass("hidden")):(n=5,band="5GHz",$("#sm-range,#xs-range").removeClass("hidden"));var s=o(parsedWifiData);r(s,n)}})}function i(a){if(null!=a&&0!=a.indexOf("\n")&&0!=a.indexOf("\r")){var t=[[],[],[],[],[]],e=a.split(/BSS [A-Fa-f0-9]{2}[:]/g);e.shift();for(var n=function(a,t){var e,n=[];for(e=0;e<t.length;e++){var s=t[e],i=s.indexOf(a),o=s.indexOf(":"),l=s.indexOf("="),d=o;if((d<0||l>=0&&l<d)&&(d=l),i>=0&&d>i){var r=s.substr(d+1);r=r.replace(/^[^\"]*\"/g,""),r=r.replace(/\".*$/g,""),r=r.replace(/^[ ]/g,""),r=r.replace(/ dBm/g,""),r=r.replace(/channel /g,""),n.push(r)}}return n};e.length>0;){var s=e.shift(),i=s.split(/[\r\n]+/),o=n("SSID",i).shift(),l=n("DS Parameter set",i).shift(),d=n("secondary channel offset",i).shift(),r=n("signal",i).shift(),c=n("* channel width",i).shift();if(!l)var l=n("* primary channel",i).shift();d||(d="no secondary"),null!=o&&null!=l&&null!=d&&null!=r&&(t[0].push(o),t[1].push(l),t[2].push(d),t[3].push(r),t[4].push(c))}for(x=0;x<t[0].length;x++){for(append=2,y=x+1;y<t[0].length;y++)t[0][x]==t[0][y]&&(t[0][y]=t[0][y]+"_"+append,append+=1);append>2&&(t[0][x]=t[0][x]+"_1")}return t}return-1}function o(a){var t=[],e=4,n=12;if("2.4GHz"==band)for(x=0;x<a[0].length;x++){var s=a[0][x],i=a[1][x],o=a[2][x],r=a[3][x];t[x]={ssid:s,level:parseInt(r),channel:parseInt(i),secondary:o};var c=gband[0].indexOf(parseInt(i));t[x].freq=gband[1][c],"no secondary"==o&&(t[x].lowfreq=d(i,2),t[x].highfreq=d(i,3)),"above"==o&&(t[x].lowfreq=d(i,2),t[x].highfreq=d(i- -e,3)),"below"==o&&(t[x].lowfreq=d(i-e,2),t[x].highfreq=d(i,3)),t[x].channel_low=t[x].channel-(1e3*t[x].freq-1e3*t[x].lowfreq-1)/5,t[x].channel_high=t[x].channel+(1e3*t[x].highfreq-1-1e3*t[x].freq)/5}else if("5GHz"==band)for(x=0;x<a[0].length;x++){var s=a[0][x],i=a[1][x],o=a[2][x],r=a[3][x],p=a[4][x];t[x]={ssid:s,level:parseInt(r),channel:parseInt(i),secondary:o};var c=aband[0].indexOf(parseInt(i));t[x].freq=aband[1][c],"no secondary"==o&&(t[x].lowfreq=d(i,2),t[x].highfreq=d(i,3)),"above"==o&&(p?(t[x].lowfreq=d(i,2),t[x].highfreq=d(i- -n,3)):(t[x].lowfreq=d(i,2),t[x].highfreq=d(i- -e,3))),"below"==o&&(t[x].lowfreq=d(i-e,2),t[x].highfreq=d(i,3)),t[x].channel_low=t[x].channel-2*(100*t[x].freq-100*t[x].lowfreq),t[x].channel_high=t[x].channel+2*(100*t[x].highfreq-100*t[x].freq)}else t=-1;legendCount=t.length;var f=l(t);return f}function l(a){for(var t=[],e=0;e<a.length;e++){var n={};n.channel=a[e].channel,a[e].ssid.indexOf("\\x")>-1&&(a[e].ssid=a[e].ssid.replace(/\\x/g,"%"),a[e].ssid=a[e].ssid.replace(/%00/g,""),a[e].ssid=decodeURI(a[e].ssid)),n.label=a[e].ssid?a[e].ssid:"未知设备",n.lowfreq=a[e].lowfreq,n.highfreq=a[e].highfreq,n.freq=a[e].freq,n.level=parseInt(a[e].level)>=-100?parseInt(a[e].level):-100,n.data=[];var s=a[e].channel_low,i=a[e].channel_high;n.data[0]={x:s,y:0},n.data[1]={x:n.channel,y:n.level+100},n.data[2]={x:i,y:0},t.push(n)}return t}function d(t,e){return t>14?(a=aband[0].indexOf(parseInt(t)),aband[e][a]):(a=gband[0].indexOf(parseInt(t)),gband[e][a])}function r(a,t){var e={datasets:a},n={label:"",data:[{x:-2,y:100},{x:16,y:0}]};e.datasets.push(n);var s=function(a,t){var e=b(.6);t.borderColor=e,t.backgroundColor=b(.1,e),t.pointBorderColor=b(.7,e),t.pointBackgroundColor=b(.5,e),t.pointBorderWidth=1,""==t.label&&(t.pointBorderColor="transparent",t.pointBackgroundColor="transparent",t.pointBorderWidth=0,t.borderColor="transparent",t.backgroundColor="transparent")};if($.each(e.datasets,s),$("#line_container").empty(),$(".chartjs-hidden-iframe").remove(),2.4==t){$("#line_container").append('<canvas id="canvas" height="300"></canvas>');var i=document.getElementById("canvas").getContext("2d"),o=$(window).width();o<=768&&$("#line_container").find("canvas").prop("height",360+12*legendCount),window.myScatter=Chart.Scatter(i,p(e,[1,2,3,4,5,6,7,8,9,10,11,12,13,16],-2,16,1,f,"2401-2495 MHz"))}else if(5==t){console.log(e),e.datasets.pop();for(var l,d,r,v={datasets:[]},_={datasets:[]},g={datasets:[]},m=0;m<e.datasets.length;m++)e.datasets[m].channel<100?v.datasets.push(e.datasets[m]):e.datasets[m].channel<149?_.datasets.push(e.datasets[m]):g.datasets.push(e.datasets[m]);for(var x=0;x<g.datasets.length;x++)for(var y=0;y<g.datasets[x].data.length;y++)g.datasets[x].data[y].x-=1;l=v.datasets.length,d=_.datasets.length,r=g.datasets.length;var k=Math.max(l,d,r);$("#5g_1_btn").find(".badge").html(l||""),$("#5g_2_btn").find(".badge").html(d||""),$("#5g_3_btn").find(".badge").html(r||""),$("#xs-range").find('[value="5g_1"]').html("5170-5330 ("+l+")"),$("#xs-range").find('[value="5g_2"]').html("5490-5710 ("+d+")"),$("#xs-range").find('[value="5g_3"]').html("5735-5835 ("+r+")"),v.datasets.push({label:"",data:[{x:36,y:100},{x:64,y:0}]}),_.datasets.push({label:"",data:[{x:96,y:100},{x:142,y:0}]}),g.datasets.push({label:"",data:[{x:145,y:100},{x:167,y:0}]}),$.each(v.datasets,s),$.each(_.datasets,s),$.each(g.datasets,s),$("#line_container").append('<canvas id="5g_1" height="240"></canvas><canvas id="5g_2" height="240"></canvas><canvas id="5g_3" height="240"></canvas>');var o=$(window).width();o<=768&&$("#line_container").find("canvas").prop("height",360+12*legendCount);var w=document.getElementById("5g_1").getContext("2d"),M=document.getElementById("5g_2").getContext("2d"),C=document.getElementById("5g_3").getContext("2d");window.Scatter_5g1=Chart.Scatter(w,p(v,[36,40,44,48,52,56,60,64],32,72,4,h,"5170-5330 MHz")),window.Scatter_5g2=Chart.Scatter(M,p(_,[100,104,108,112,116,120,124,128,132,136,140],96,142,4,h,"5490-5710 GHz")),window.Scatter_5g3=Chart.Scatter(C,p(g,[148,152,156,160,164],144,168,4,u,"5735-5835 GHz")),c(l==k?1:d==k?2:3)}}function c(a){$("#5g_2,#5g_3,#5g_1").addClass("hidden"),$("#5g_"+a).removeClass("hidden"),$("#sm-range").find(".btn").removeClass("active"),$("#5g_"+a+"_btn").addClass("active"),$("#xs-range").find("select").val("5g_"+a)}function p(a,t,e,n,s,i,o){var l={type:"line",data:a,options:{title:{display:!0,text:o},tooltips:{enabled:!0,callbacks:{label:function(a,t){return _(a,t)}}},scales:{xAxes:[{position:"bottom",ticks:{autoSkip:!1,min:e,max:n,stepSize:s,userCallback:function(a){var e=t;return i(a,e)}},scaleLabel:{display:!0,labelString:"GHz",fontSize:14}}],yAxes:[{position:"left",ticks:{userCallback:function(a){return v(a)}},scaleLabel:{display:!0,labelString:"dBm",fontSize:14}}]}}};return l}function f(a,t){return t.indexOf(a)<0?"":16==a?14:a}function h(a,t){return t.indexOf(a)>=0?a:""}function u(a,t){return t.indexOf(a)>=0?a+1:""}function v(a){return 100==a?"":a-100}function _(a,t){var e,n=[],s=t.datasets[a.datasetIndex].label,i="level: "+t.datasets[a.datasetIndex].level+"dBm",o="channel: "+t.datasets[a.datasetIndex].channel;return e=0==a.index?"lowfreq: "+t.datasets[a.datasetIndex].lowfreq+"MHz":1==a.index?"freq: "+t.datasets[a.datasetIndex].freq+"MHz":"highfreq: "+t.datasets[a.datasetIndex].highfreq+"MHz",n.push(s),n.push(i),n.push(o),n.push(e),""==s?"":n}function b(a,t){if("undefined"==typeof t)return"rgba("+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+Math.round(255*Math.random())+","+(a||".3")+")";var e=t.split(",");return e[3]=a+")",e.join(",")}function g(a){var t,e=JSON.stringify(a),n=Math.round(+new Date/1e3)+timestamp_diff,s=a.SSID?'<span class="like-a-link env-trigger" data-mod="2.4g" data-toggle="modal" data-target="#envModal">'+a.SSID.replace(/,/,'</span><br><span class="like-a-link env-trigger" data-mod="5.8g" data-toggle="modal" data-target="#envModal">')+"</span>":"",i=a.Desc?a.Desc:"未设置",o=a.BW_up&&a.BW_down?'<span class="icon-arrow-up"></span>'+a.BW_up+'<br><span class="icon-arrow-down"></span>'+a.BW_down:"未连接",l=a.Quota_used&&a.Quota_total&&"undefined"!=typeof a.Quota_pused?""+a.Quota_used+"/"+a.Quota_total+"<br>"+a.Quota_pused+"%":"未连接",d=k(a.Uptimes),r="",c="";"undefined"==typeof a.Id?t="icon-available text-info":(t=0==a.Enabled?"icon-forbidden text-danger":a.Time+300<n?"icon-offline text-warning":"icon-running text-success",r='<br><button class="btn btn-danger btn-xs confirm_trigger" data-callback="deleteAC" data-confirm-title="删除AC" data-confirm-text="确定删除AC？" data-mac="'+a.Mac+'">删除</button>',c='<br><button data-toggle="modal" data-target="#envModal" class="btn btn-xs btn-primary get_env_btn" data-mac="'+a.Mac+'">env</button>');var p='<tr data-mac="'+a.Mac+'"><td><input type="checkbox" name="" value="'+a.Mac+'" data-id=""></td><td class="like-a-link" data-mac="'+a.Mac+'" data-toggle="modal" data-target="#clientModal"><span class="'+t+'">&nbsp;'+a.Clients+"</span><br>"+a.Model+"</td><td>"+d+"<br>M:"+a.Loads_pmem+"%&nbsp;C:"+a.Loads_pcpu+'%</td><td class="like-a-link" data-data=\''+e+'\' data-toggle="modal" data-target="#editAcModal">'+i+"</td><td>"+(a.Mac?a.Mac:"")+"<br>"+(a.IP?a.IP:"")+"</td><td>"+s+"</td><td>"+(a.Enc?a.Enc:"")+":<br>"+(a.Key?a.Key:"")+"</td><td>"+o+"</td><td>"+l+"</td><td><span>"+(a.Version?"v"+a.Version:"Unknown Version")+"</span>"+r+"</td></tr>";return p}function m(a){var t=a.Desc?a.Desc:"";if(a.SSID)var e=a.SSID.split(",");var n="",s="",i="",o="",l="",d="",r="",c="";1==a.Bridge?l="selected":d="selected","none"==a.Enc?(s="selected",r="hidden",c=""):"psk2"==a.Enc?(i="selected",c=a.Key):(o="selected",c=a.Key);for(var p=0;p<e.length;p++)n+='<input type="text" class="form-control" id="" name="" value="'+e[p]+'">';var f='<form name="eidt_client_form" class="form-horizontal"><input type="hidden" id="mac_input" value="'+a.Mac+'"><input type="hidden" id="model_input" value="'+a.Model+'"><input type="hidden" id="ver_input" value="'+a.Version+'"><div class="form-group"><label for="" class="control-label col-sm-2">Desc</label><div class="col-sm-10"><input type="text" class="form-control" id="desc_input" name="" value="'+t+'"></div></div><div class="form-group" id="ssid_group"><label for="" class="control-label col-sm-2">SSID</label><div class="col-sm-10">'+n+'</div></div><div class="form-group"><label for="" class="control-label col-sm-2">IP</label><div class="col-sm-10"><input type="text" class="form-control" id="ip_input" name="" value="'+a.IP+'"></div></div><div class="form-group"><label for="" class="control-label col-sm-2">Bridge</label><div class="col-sm-10"><select id="is_bridge" name="" class="form-control"><option value="1" '+l+'>Bridge</option><option value="0" '+d+'>Nat</option></select></div></div><div class="form-group"><label for="" class="control-label col-sm-2">Enc</label><div class="col-sm-10"><select id="enc_type" name="" class="form-control"><option value="none" '+s+'>None</option><option value="psk2" '+i+'>PSK2</option><option value="mixed-psk" '+o+'>Mixed</option></select></div></div><div class="form-group '+r+'" id="key_container"><label for="" class="control-label col-sm-2">Key</label><div class="col-sm-10"><input id="enc_key" name="" value="'+c+'" class="form-control"></div></div></form>';return f}function k(a){if(a<=0)return"";var t="";return t=a<60?t+a+"秒":a<3600?t+Math.floor(a/60)+"分"+a%60+"秒":a<86400?t+Math.floor(a/3600)+"小时"+Math.floor(a%3600/60)+"分"+a%60+"秒":t+Math.floor(a/86400)+"天"+Math.floor(a%86400/3600)+"小时"+Math.floor(a%86400%3600/60)+"分"+a%60+"秒"}function w(a,t){$("#"+a).click(function(){$("#"+t+" :checkbox").prop("checked",$("#"+a).prop("checked"))})}function M(a){var t=[];return $("#"+a+" :checkbox").each(function(){$(this).prop("checked")&&t.push($(this).val())}),t}var C=0;n(),w("select_all_fw","fw_list"),w("select_all_restore","restore_file_list"),$("#operate_btn").find("button").click(function(){if(C=0,$("#ac_container :checkbox").each(function(){$(this).prop("checked")&&(C+=1)}),!C)return!1}),$("#upload_fw_btn").click(function(){$("#upload-fw").val("").prop("disabled",!1),$("#file_name").html("上传文件"),$("#file_info").addClass("hidden"),$("#uploader").removeClass("hidden"),$("#flash_fw_form").addClass("hidden"),$("#uploadFWModal").find(".modal-title").html("上传固件"),$("#uploadFWModal").find(".upload-progress-bar").addClass("hidden").find("span").css("width","0"),$("#file_desc").empty()}),$("#upload-fw").change(function(){$("#submit-file-btn").prop("disabled",!1);var a=$(this).val(),t=a.split("\\").pop();$("#file_name").html(t);var e=$(this).get(0).files[0];if(e){$("#file_info").removeClass("hidden");var n=0;n=e.size>1048576?(Math.round(100*e.size/1048576)/100).toString()+"MB":(Math.round(100*e.size/1024)/100).toString()+"KB",$("#file_size").html(n||""),$("#file_type").html(e.type||"")}}),$("#uploader").submit(function(){t()}),$("#uploader").ajaxForm({uploadProgress:function(a,t,e,n){$("#upload-fw").prop("disabled",!0),$("#submit-file-btn").prop("disabled",!0);var s=n+"%";$(".upload-progress-bar").find("span").css("width",s),$("#progress-text").html(s)},complete:function(a){var t=$.parseJSON(a.responseText);t.status=parseInt(t.status),Ha.showNotify(t),$("#uploader").addClass("hidden"),$("#flash_fw_form").removeClass("hidden"),$("#uploadFWModal").find(".modal-title").html("刷机");var e="<div><span>File:&nbsp;&nbsp;"+t.file+"</span><br><span>MD5:&nbsp;&nbsp;"+t.md5+"</span><br><span>Size:&nbsp;&nbsp;"+t.size+"</span></div>";$("#file_desc").append(e)}}),$("#submit_flash").click(function(){var a={};return a.bak_file=[],a.ap_list=M("ac_container"),$("#fw_list :checkbox").each(function(){$(this).prop("checked")&&a.bak_file.push($(this).val())}),a.app="ac-set",a.action="flash_ap",$.post("/",a,function(a){Ha.showNotify(a),a.status||$("#uploadFWModal").modal("hide")},"json"),!1}),e("reboot"),e("enable"),e("disable"),$("#submit_restore").click(function(){var a={};return a.bak_file=[],a.ap_list=M("ac_container"),a.bak_file=M("restore_file_list"),a.app="ac-set",a.action="restore_ap",$.post("/",a,function(a){Ha.showNotify(a),a.status||$("#restoreModal").modal("hide")},"json"),!1}),$("#submit_ssid").click(function(){var a={};a.app="ac-set",a.action="setssid_ap",a.ap_list=M("ac_container"),a.ssid_24g=$("#set_ssid_form").find('[name="ssid_24g"]').val(),a.ssid_58g=$("#set_ssid_form").find('[name="ssid_58g"]').val(),a.enc=$("#enc_types").val(),a.key=$("#enc_keys").val(),Ha.ajax("/","json",a,"post","",function(a){Ha.showNotify(a),a.status||$("#ssidSetModal").modal("hide")},1)}),$("#submit_bw").click(function(){var a={};a.app="ac-set",a.action="bw_set",a.ap_list=M("ac_container"),a.total=$("#bw_set_form").find('[name="total"]').val(),Ha.ajax("/","json",a,"post","",function(a){Ha.showNotify(a),a.status||$("#bwModal").modal("hide")},1)}),$('[data-target="#ssidSetModal"]').click(function(){$("#enc_types").val("none"),$("#enc_keys").parent().parent().addClass("hidden")}),$("#enc_types").change(function(){var a=$(this).val();"none"==a?($("#enc_keys").parent().parent().addClass("hidden"),$("#enc_keys").val("")):($("#enc_keys").parent().parent().removeClass("hidden"),$("#enc_keys").val(""))}),$("#kick_out_clients_btn").click(function(){var a=$('[data-target="#clientModal"]').attr("data-mac"),t=[];$("#client_table :checkbox").each(function(){$(this).prop("checked")&&t.push($(this).attr("data-mac"))});var e={app:"ac-set",action:"kick_out_clients",mac:t,ap_mac:a};return e.mac.length<=0?void Ha.showNotify({status:1,msg:"没有选择设备。"}):void $.post("/",e,function(a){Ha.showNotify(a),a.status||$("#clientModal").modal("hide")},"json")}),$("#flash-env-btn").click(function(){var a=$("#flash-env-btn").attr("data-mac"),t=$("#flash-env-btn").attr("data-mod");s(a,t)}),$("#xs-range").find("select").change(function(){var a=$(this).val().replace("5g_","");c(a)}),$("#sm-range").find(".btn").click(function(){var a=$(this).prop("id"),t=a.replace("5g_","").replace("_btn","");c(t)})}();