function drawPctCircle(t,e,a,s,r,i){var n=document.getElementById(t),o=document.createElementNS("http://www.w3.org/2000/svg","g"),l=document.createElementNS("http://www.w3.org/2000/svg","g"),p=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(o),o.appendChild(l),l.appendChild(p),o.setAttribute("fill","none"),o.setAttribute("stroke-width","20"),o.setAttribute("opacity","0.5"),o.setAttribute("stroke","white");var c=36*e/10;o.setAttribute("transform","translate("+s+","+r+") rotate("+c+")"),l.setAttribute("transform","translate("+-s+","+-r+")"),o.appendChild(l),p.setAttribute("transform","translate("+s+","+r+")");var d=a-e;pcts=d/100;var u=360*pcts,h=u*(Math.PI/180),m=(Math.sin(h)*i).toFixed(2),v=-(Math.cos(h)*i).toFixed(2);if(d<=50)var g=["M",0,-i,"A",i,i,0,0,1,m,v];else var g=["M",0,-i,"A",i,i,0,1,1,0,i,"A",i,i,0,0,1,m,v];p.setAttribute("d",g.join(" "))}function getStatusColor(t){var e="hsl("+Math.round(145-145*t)+","+Math.round(63+37*t)+"%,"+Math.round(49+t)+"%)";return e}function setEthModal(t){var e=t.attr("data-eth"),a=t.attr("data-bw");$("#eth_static").html(e),$("#eth_select").val(e),$("#eth_bw").val(parseFloat(a)),$("[data-validate]").trigger("blur")}var ethArr=[],askStatus=function(){$.get("/","app=status&action=hw_status",function(t){Ha.mask.hide();var e=t.uptime.days+"&nbsp;"+UI.Days+"&nbsp;"+t.uptime.hours+"&nbsp;"+UI.hours+"&nbsp;"+t.uptime.mins+"&nbsp;"+UI.mins+"&nbsp;"+t.uptime.secs+"&nbsp;"+UI.secs+"&nbsp;";$("#running-time").html(e),$("#cpu-container").empty();for(var a in t.cpu){var s=getStatusColor(parseInt(t.cpu[a])/100),r='<div class="col-xs-12 col-sm-4 col-md-3 net-status-item"><h4 class="text-center">'+a+'</h4><hr><div class="text-center"><svg width="120" height="120" id="cpu_svg_'+a+'"><circle cx="60" cy="60" r="50" fill="'+s+'"></circle><text x="60" y="60" dy="6" text-anchor="middle" fill="white" font-size="18">'+t.cpu[a]+"</text></svg></div></div>";$(r).appendTo("#cpu-container"),drawPctCircle("cpu_svg_"+a,0,parseFloat(t.cpu[a]),60,60,40)}$("#mem-usage").html(t.mem.usage),$("#mem-total").html(t.mem.total),$("#mem-used").html(t.mem.used),$("#mem_prog").empty();var i=getStatusColor(parseInt(t.mem.usage)/100);$("#mem-circle").get(0).setAttribute("fill",i),drawPctCircle("mem_prog",0,parseFloat(parseFloat(t.mem.usage)),60,60,40),$("#swap-usage").html(t.swap.usage),$("#swap-total").html(t.swap.total),$("#swap-used").html(t.swap.used),$("#swap_prog").empty();var n=getStatusColor(parseInt(t.swap.usage)/100);$("#swap-circle").get(0).setAttribute("fill",n),drawPctCircle("swap_prog",0,parseFloat(parseFloat(t.swap.usage)),60,60,40)},"json"),$.get("/","app=status&action=bw_status",function(t){var e=[];for(var a in t)e.push(a);e=e.sort();var s=0;if(e.length===ethArr.length)for(var r=0;r<e.length;r++)ethArr[r]!==e[r]&&(s+=1);else s=1;if(s){for(var r=0;r<e.length;r++)ethArr[r]=e[r];$("#eth_select").empty();for(var r=0;r<e.length;r++){var i;i="null"===t[e[r]].ip?"":"("+t[e[r]].ip+")";var n='<option value="'+e[r]+'">'+e[r]+i+"</option>";$("#eth_select").append(n)}}$("#eths-container").empty();for(var r=0;r<e.length;r++){var i,o,l,p;i="null"===t[e[r]].ip?"":"("+t[e[r]].ip+")",t[e[r]].up?(o=UI.Inused,l="#2ECC71",l=getStatusColor(parseFloat(t[e[r]].s_pct)/100)):(o=UI.Standby,l="#666"),p=e[r].indexOf(".")>0?e[r].replace(".","_"):e[r];var c='<div class="col-xs-12 col-sm-6 col-md-4 net-status-item"><h4 class="text-center">'+e[r]+i+'</h4><hr><div class="row"><div class="col-xs-5"><svg width="120" height="120" id="svg_'+r+'"><circle cx="60" cy="60" r="50" fill="'+l+'"></circle><text x="60" y="60" dy="6" text-anchor="middle" fill="white" font-size="18">'+t[e[r]].s_pct+'</text></svg></div><div class="col-xs-7"><p>'+o+"</p><span>"+UI.Bandwidth+":"+t[e[r]].bw+'</span><span class="icon-set" style="cursor: pointer" data-bw="'+t[e[r]].bw+'" data-eth="'+e[r]+'" data-toggle="modal" data-target="#ethModal"></span><br><span>'+UI.Bandwidth_used+": "+t[e[r]].s_pct+'</span><br><span class="icon-arrow-up"></span>&nbsp;<span class="">'+t[e[r]].s_tx+" - "+t[e[r]].t_tx+'</span><br><span class="icon-arrow-down"></span>&nbsp;<span class="">'+t[e[r]].s_rx+" - "+t[e[r]].t_rx+"</span></div></div></div>";$(c).appendTo("#eths-container"),$(".icon-set").click(function(){setEthModal($(this))}),Ha.setFooterPosition(),function(a){drawPctCircle("svg_"+a,0,parseFloat(t[e[r]].s_pct),60,60,40)}(r)}var d=$("body").height();$("body").css("height",d)},"json")};$("#bw_set").submit(function(){var t=disableBtn();if(t);else{var e=$(this).serialize();e="app=status&action=bw_set&"+e,Ha.ajax("/","json",e,"post")}return!1}),$("[data-validate]").bind("blur keyup",Validate.checkInput),$("#ethModal").find("form").submit(function(){$(this).find("[data-validate]").trigger("keyup");var t=$(this).serialize();return t="app=status&action=set_eth_bw&"+t,$.post("/",t,function(t){Ha.showNotify()},"json"),$("#ethModal").modal("hide"),!1});