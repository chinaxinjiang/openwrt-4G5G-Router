function change_lang(e){var t="app=home&action=change_lang&lang="+e,a="/";Ha.ajax(a,"json",t,"post")}function change_theme(e){var t="app=home&action=change_theme&theme="+e,a="/";Ha.ajax(a,"json",t,"post")}function formatTime(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}function UCIContainer(){this.keys=new Array,this.values=new Array,this.listOptions=new Array,this.createListOption=function(e,t,a,n){n=null==n;var i=e+"."+t+"."+a;if(null==this.listOptions[i])if(this.listOptions[i]=1,null!=this.values[i]){var s=this.values[i];this.values[i]=n||null==s?[]:[s]}else this.keys.push(i),this.values[i]=[]},this.set=function(e,t,a,n,i){i=null!=i&&i;var s=e+"."+t;if(null!=a&&""!=a&&(s=s+"."+a),null!=this.values[s])if(null!=this.listOptions[s]){for(var o=this.values[s];o.length>0&&!i;)o.pop();if(n instanceof Array){var l;for(l=0;l<n.length;l++)o.push(n[l])}else o.push(n);this.values[s]=o}else this.values[s]=n;else if(this.keys.push(s),null!=this.listOptions[s]){var o=[];if(n instanceof Array){var r;for(r=0;r<n.length;r++)o.push(n[r])}else o=[n];this.values[s]=o}else this.values[s]=n},this.get=function(e,t,a){var n=e+"."+t;null!=a&&""!=a&&(n=n+"."+a);var i=this.values[n];return null!=i?i:""},this.removeAllSectionsOfType=function(e,t){var a=this.getAllSectionsOfType(e,t),n=0;for(n=0;n<a.length;n++)this.removeSection(e,a[n])},this.getAllOptionsInSection=function(e,t,a){a=null!=a&&a;var n=new Array;for(keyIndex in this.keys){var i=this.keys[keyIndex],s=e+"."+t;if(i.match(s)&&i.match(/^[^\.]+\.[^\.]+\.[^\.]+/)&&(a||null==this.listOptions[i])){var o=i.match(/^[^\.]+\.[^\.]+\.([^\.]+)$/)[1];n.push(o)}}return n},this.getAllSectionsOfType=function(e,t){var a=new Array;for(keyIndex in this.keys)if(key=this.keys[keyIndex],key.match(e)&&key.match(/^[^\.]+\.[^\.]+$/)&&this.values[key]==t){var n=key.match(/^[^\.]+\.([^\.]+)$/)[1];a.push(n)}return a},this.getAllSections=function(e){var t=new Array;for(keyIndex in this.keys)if(key=this.keys[keyIndex],key.match(e)&&key.match(/^[^\.]+\.[^\.]+$/)){var a=key.match(/^[^\.]+\.([^\.]+)$/)[1];t.push(a)}return t},this.remove=function(e,t,a){var n=e+"."+t;""!=a&&(n=n+"."+a),null!=this.listOptions[n]&&(this.listOptions[n]=null);var i=this.values[n];if(null!=i){this.values[n]=null;for(var s=[];this.keys.length>0;){var o=this.keys.shift();o!=n&&s.push(o)}this.keys=s}else i="";return i},this.removeSection=function(e,t){removeKeys=new Array,sectionDefined=!1;for(keyIndex in this.keys){if(key=this.keys[keyIndex],testExp=new RegExp(e+"\\."+t+"\\."),key.match(testExp)){var a=key.split(".");removeKeys.push(a[2])}key==e+"."+t&&(sectionDefined=!0)}for(rkIndex in removeKeys)this.remove(e,t,removeKeys[rkIndex]);sectionDefined&&this.remove(e,t,"")},this.clone=function(){var e=new UCIContainer,t=0;for(t=0;t<this.keys.length;t++){var a=this.keys[t],n=this.values[a];null!=this.listOptions[a]&&(e.listOptions[a]=1);var i=a.match(/^([^\.]+)\.([^\.]+)\.([^\.]+)$/);null==i&&(i=a.match(/^([^\.]+)\.([^\.]+)$/),null!=i&&i.push("")),e.set(i[1],i[2],i[3],n,!0)}return e},this.print=function(){var e="",t=0;for(t=0;t<this.keys.length;t++){var a=this.keys[t];e=this.values[a]instanceof Array?e+"\n"+a+' = "'+this.values[a].join(",")+'"':e+"\n"+a+' = "'+this.values[a]+'"'}return e},this.getScriptCommands=function(e){var t=new Array,a=[],n=0;for(n=0;n<e.keys.length;n++){var i=e.keys[n],s=e.values[i],o=this.values[i];if(s instanceof Array&&!(o instanceof Array)||o instanceof Array&&!(s instanceof Array))t.push("uci del "+i);else if(s instanceof Array&&o instanceof Array){var l=s.length==o.length;if(l){var r,d=s.sort(),f=o.sort();for(r=0;l&&r<d.length;r++)l=d[r]==f[r]}l?a[i]=1:t.push("uci del "+i)}else null!=o&&""!=o||null==s||""==s||t.push("uci del "+i)}for(n=0;n<this.keys.length;n++){var i=this.keys[n],s=e.values[i],o=this.values[i];try{if(s instanceof Array||o instanceof Array)if(o instanceof Array){if(null==a[i]){var c;for(c=0;c<o.length;c++){var u=""+o[c];t.push("uci add_list "+i+"='"+u.replace(/'/,"'\\''")+"'")}}}else o=""+o,t.push("uci set "+i+"='"+o.replace(/'/,"'\\''")+"'");else s!=o&&null!=o&&""!=o&&(o=""+o,t.push("uci set "+i+"='"+o.replace(/'/,"'\\''")+"'"))}catch(p){alert("bad key = "+i+"\n")}}return t.push("uci commit"),t.join("\n")}}function quickSubmit(e){Ha.mask.show();var t=$.parseJSON(e);if(t.confirm){Ha.mask.hide();var a=confirm(t.confirm);if(!a)return Ha.mask.hide(),!1;Ha.mask.show()}$.post("/",t,function(e){Ha.mask.hide(),"json"==t.response?($("#response-container").addClass("hidden"),Ha.showNotify(e)):$("#response-container").removeClass("hidden").html(e)},t.response)}var Ha=window.Ha||{};if(!UI)var UI={};Ha.showNotify=function(e){var t="success",a=5e3;e.status&&(t="error"),e.jump_url&&e.seconds&&(a=e.seconds),Lobibox.notify(t,{msg:e.msg,img:e.img,delay:a,size:"mini",showClass:"bounceInDown",hideClass:"fadeOut",sound:!1})},Ha.mask={show:function(){$(".loading").removeClass("hidden"),$("body").addClass("mask")},hide:function(){$("body").removeClass("mask"),$(".loading").addClass("hidden")}},Ha.disableForm=function(e){var t=$("#"+e);$(this).prop("disabled","disabled"),t.find('.form-control,[type="submit"],[type="checkbox"]').prop("disabled",!0)},Ha.reableForm=function(e){var t=$("#"+e);$(this).prop("disabled",!1),t.find('.form-control,[type="submit"],[type="checkbox"]').prop("disabled",!1)},Ha.ajax=function(e,t,a,n,i,s,o){Ha.disableForm(i),o||Ha.mask.show();var i=i||"",s=s||null;$.ajax({url:e||"",dataType:t||"json",data:a||"",type:n||"get",success:function(e){e.status&&Ha.reableForm(i),o||Ha.showNotify(e);var t=e.jump_url||!1;t&&e.seconds?(Ha.disableForm(i),setTimeout(function(){location.href=t},e.seconds)):Ha.reableForm(i),"function"==typeof s&&s(e,i)},complete:function(){Ha.mask.hide()},error:function(e){}})},Ha.setFooterPosition=function(){var e=$("#header").height(),t=$("#main").height(),a=$(window).height(),n=$("#footer").height(),i=e+t+n,s=a-i;s>0?$("#footer").addClass("absolute"):s<0&&$("#footer").removeClass("absolute")},Ha.setFooterPosition(),$('[data-toggle="tab"]').each(function(e){$(this).on("click",function(){setTimeout(function(){Ha.setFooterPosition()})})}),$(window).resize(function(){Ha.setFooterPosition()}),$("#collapsedBtn").click(function(){var e=setInterval(function(){Ha.setFooterPosition()});setTimeout(function(){clearInterval(e)},500)}),Ha.setRssiIcon=function(e,t){$("#sta-item-"+e).find(".rssi-text").html(t+"%");var a=$("#sta-item-"+e).find(".rssi-icon");t<=0?a.find("span").each(function(e){$(this).css("background-color","transparent")}):t>0&&t<=25?a.find("span").each(function(e){e<1?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):t>25&&t<=50?a.find("span").each(function(e){e<2?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):t>50&&t<=75?a.find("span").each(function(e){e<3?$(this).css("background-color","#0f0"):$(this).css("background-color","transparent")}):a.find("span").each(function(e){$(this).css("background-color","#0f0")})},function(){$(window).load(function(){var e=$(window).scrollTop();e>100?$(".gotop-widget").removeClass("hidden"):($(".gotop-widget").addClass("hidden"),$(".menu-widget").addClass("hidden"))}),$(window).scroll(function(){var e=$(window).scrollTop();e>100?$(".gotop-widget").removeClass("hidden"):($(".gotop-widget").addClass("hidden"),$(".menu-widget").addClass("hidden"))}),$("#menu-widget-btn,.menu-close,#xs-menu-btn").click(function(){var e=function(e){e.preventDefault()};$("body").bind("touchmove",e),$(".menu-widget").hasClass("hidden")?($(".menu-widget").removeClass("hidden"),$(window).width()<768&&(document.documentElement.style.overflow="hidden")):($(".menu-widget").addClass("hidden"),document.documentElement.style.overflow="scroll",$("body").unbind("touchmove"))}),$(".menu-widget").mouseleave(function(){$(this).addClass("hidden"),document.documentElement.style.overflow="scroll",$("body").unbind("touchmove")})}(),function(){$('[data-target="#quickModal"]').click(function(){$("#response-container").empty()})}(),Ha.setConfirmModal=function(e,t,a,n,i){$("#"+e).find(".modal-title").html(t),$("#"+e).find(".confirm-text").html(a),$("#"+e).find("#confirm_btn").unbind("click"),$("#"+e).find("#confirm_btn").bind("click",function(){"undefined"!=typeof i?n(i):n(),$("#"+e).modal("hide"),$("#"+e).find("#confirm_btn").unbind("click")})},Ha.alterModal=function(e,t,a,n,i){"undefined"!=typeof i?($("#"+i).find('[type="checkbox"]').prop("disabled",!0),Ha.setConfirmModal(e,t,a,n,i)):Ha.setConfirmModal(e,t,a,n)},Ha.setSwitchBtn=function(e,t,a){$("#"+e).find('[type="checkbox"]').prop("disabled",!1),t?$("#"+e).find('[type="checkbox"]').prop("checked",!a):$("#"+e).find('[type="checkbox"]').prop("checked",a)},$("#quickModal").find(".like-a-link").click(function(){$("#quickModal").find(".like-a-link").removeClass("active"),$(this).addClass("active")}),$('[data-target="#quickModal"]').click(function(){$("#quickModal").find(".like-a-link").removeClass("active")});var Components={};Components.confirm_modal='<div class="modal fade" id="confirm_modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title"></h4></div><div class="modal-body"><p class="confirm-text"></p></div><div class="modal-footer"><button type="button" class="btn btn-default" id="confirm_btn">Sure</button><button type="button" class="btn btn-warning" data-dismiss="modal">Close</button></div></div></div></div>',Components.setConfirmModal=function(){var e=$(this),t=e.prop("type"),a=e.attr("data-callback"),n=e.attr("data-confirm-title"),i=e.attr("data-confirm-text");if($("#confirm_modal")&&$("#confirm_modal").remove(),$("body").append(Components.confirm_modal),$("#confirm_modal").find(".modal-title").html(n),$("#confirm_modal").find(".confirm-text").html(i),$("#confirm_modal").modal("show"),"checkbox"===t){var s=e.prop("checked");e.prop("checked",!s);var o=i.split("-");i=s?o[0]+"开启"+o[1]:o[0]+"关闭"+o[1],$("#confirm_modal").find(".confirm-text").html(i)}$("#confirm_btn").click(function(){confirmMethod[a](e),$("#confirm_modal").modal("hide")})},Components.uploader_form=function(e,t){var a='<form class="form" id="uploader'+e+'" method="POST" enctype="multipart/form-data"><div class="form-group uploader-ctrl"><p class="uploader_header_info">'+t+'</p><label for="uploader_input'+e+'"><p class="btn btn-info">'+(UI.Browse||"Browse")+'</p><p class="file_name">'+(UI.Upload_file||"Upload file")+'</p></label><input type="file" id="uploader_input'+e+'" name="file" class="form-control uploader_input"></div><div class="form-group"><button type="submit" id="submit_file_uploader'+e+'" disabled class="btn btn-default">'+(UI.Upload||"Upload")+'</button><span class="upload-progress-bar hidden"><span></span></span></div></form>';return a},Components.uploader_info='<div class="uploader_file_info hidden"><label>'+(UI.File_Size||"File Size")+':</label><span class="file_size"></span><br><label>'+(UI.File_Format||"File Format")+':</label><span class="file_type"></span><br><label>'+(UI.Upload_Progress||"Upload Progress")+':</label><span class="progress-text">0%</span></div>',Components.makeUploader=function(e,t){function a(){var t=e.find(".file_name").width();t<208&&(t=208),e.find(".upload-progress-bar").css("width",t).removeClass("hidden")}var n=e.attr("data-action"),i=e.attr("data-label"),s=e.prop("id");e.append(Components.uploader_form(s,i)).append(Components.uploader_info),e.find("form").prop("action",n),$("#uploader"+s).ajaxForm({uploadProgress:function(t,a,n,i){var s=i+"%";e.find(".upload-progress-bar").find("span").css("width",s),e.find(".progress-text").html(s)},complete:function(e){t(e)}}),$("#uploader_input"+s).change(function(){$("#submit_file_uploader"+s).prop("disabled",!1);var t=$(this).val(),a=t.split("\\").pop();e.find(".file_name").html(a);var n=$(this).get(0).files[0];if(n){e.find(".uploader_file_info").removeClass("hidden");var i=0;i=n.size>1048576?(Math.round(100*n.size/1048576)/100).toString()+"MB":(Math.round(100*n.size/1024)/100).toString()+"KB",e.find(".file_size").html(i||""),e.find(".file_type").html(n.type||"")}}),$("#uploader"+s).submit(function(){$("#uploader_input"+s).prop("disabled",!0),a(),$("#submit_file_uploader"+s).prop("disabled",!0)})};var Validate={};Validate.vaIP=function(e){var t=0;if(""===e)return 0;if("0.0.0.0"===e)t=1;else if("255.255.255.255"===e)t=2;else{var a=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(null===a)t=5;else for(field=1;field<=4;field++)a[field]>255&&(t=4),255==a[field]&&4==field&&(t=3)}return t},Validate.vaIPs=function(e){for(var t=0,a=e.split(","),n=0;n<a.length;n++){if(""===a[n])return 1;Validate.vaIP(a[n])&&(t+=1)}return t},Validate.vaIPRange=function(e){var t=0,a=e.split("-");a.length<2&&(t=1);for(var n=0;n<a.length;n++){if(""===a[n])return 1;Validate.vaIP(a[n])&&(t+=1)}return t},Validate.vaIPRanges=function(e){for(var t=0,a=e.split(","),n=0;n<a.length;n++)Validate.vaIPRange(a[n])&&(t+=1);return t},Validate.vaIPS=function(e){e=e.replace(/^[\t ]+/g,""),e=e.replace(/[\t ]+$/g,"");for(var t=e.split(/[\t ]*,[\t ]*/),a=t.length>0?0:1;0==a&&t.length>0;){var n=t.pop();if(n.match(/-/)){var i=n.split(/[\t ]*-[\t ]*/);if(2==i.length&&0==Validate.vaIP(i[0])&&0==Validate.vaIP(i[1])){var s=Validate.getIpInteger(i[0]),o=Validate.getIpInteger(i[1]);a=s<=o?0:1}else a=1}else a=Validate.vaIpRange(n)}return a},Validate.vaIpRange=function(e){var t=1;if(e.indexOf("/")>0){var a=e.split("/");if(2==a.length){var n=Validate.vaIP(a[0]),i=0==Validate.vaNetMask(a[1])||0==Validate.vaNumericRange(a[1],1,31)?0:1;t=0==n&&0==i?0:1}}else t=Validate.vaIP(e);return t},Validate.vaNetMask=function(e){var t=0,a=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);if(null==a)t=4;else for(previousField=255,field=1;field<=4;field++)a[field]>255&&(t=3),previousField<255&&0!=a[field]&&t<2&&(t=2),255!=a[field]&&254!=a[field]&&252!=a[field]&&248!=a[field]&&240!=a[field]&&224!=a[field]&&192!=a[field]&&128!=a[field]&&0!=a[field]&&t<1&&(t=1),previousField=a[field];return t},Validate.vaNumericRange=function(e,t,a){var n=null==e.match(/^[\d]+$/)?1:0;return 0==n&&(n=e<t?2:0),0==n&&(n=e>a?3:0),n},Validate.getIpInteger=function(e){e=null==e?"":e;var t=e.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/);return t?(+Validate.parsePaddedInt(t[1])<<24)+(+Validate.parsePaddedInt(t[2])<<16)+(+Validate.parsePaddedInt(t[3])<<8)+ +Validate.parsePaddedInt(t[4]):parseInt("")},Validate.parsePaddedInt=function(e){for(e=null==e?"":e,e=e.replace(/[\t ]+/,"");e.length>1&&e.match(/^0/)||e.length>2&&e.match(/^\-0/);)e=e.replace(/^0/,""),e=e.replace(/^\-0/,"-");return parseInt(e)},Validate.vaMac=function(e){var t=0;if(""===e)return 0;var a=e.split(/:/);if(6!=a.length)t=2;else for(fieldIndex=0;fieldIndex<6&&0===t;fieldIndex++)field=a[fieldIndex],null===field.match(/^[0123456789ABCDEFabcdef]{2}$/)&&(t=1);return t},Validate.vaEmail=function(e){var t=0;if(""===e)return 0;var a="^[0-9a-z][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}[0-9a-z].){1,4}[a-z]{2,4}$",n=new RegExp(a);return n.test(e)||(t=1),t},Validate.vaHostname=function(e){var t=0,a="^(([0-9a-zA-Z-]+)*)$",n=new RegExp(a);return n.test(e)||(t=1),t},Validate.vaCCode=function(e){var t=0,a="^(([0-9a-zA-Z]+)*)$",n=new RegExp(a);return n.test(e)||(t=1),t},Validate.vaURL=function(e){var t="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",a=new RegExp(t);return a.test(e)||(errorCode=1),errorCode},Validate.vaDomain=function(e){var t=0;if(""===e)return 0;var a="^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.[a-zA-Z]{2,6}$",n=new RegExp(a);return n.test(e)||(t=1),t},Validate.vaIPorDomain=function(e){return""===e?0:Validate.vaIP(e)&&Validate.vaDomain(e)?1:0},Validate.vaPath=function(e){var t=0,a="^/",n=new RegExp(a);return n.test(e)||(t=1),t},Validate.vaPort=function(e){var t=0;if(0===e.length)t=0;else for(var a=0;a<e.length;a++)"0123456789".indexOf(e[a])<0?t=1:e.length>5?t=1:(parseInt(e)>65535||parseInt(e)<1)&&(t=1);return t},Validate.vaPorts=function(e){for(var t=0,a=e.split(","),n=0;n<a.length;n++){if(n>0&&""===a[n])return 1;Validate.vaPort(a[n])&&(t+=1)}return t},Validate.vaMuliPorts=function(e){var t=0;if(e.length<=0)t=0;else for(var a=e.split(","),n=0;n<a.length;n++)if(a[n].indexOf("-")>0){var i=a[n].split("-");i.length>2?t=1:Validate.vaPort(i[0])||Validate.vaPort(i[1])?t=1:parseInt(i[0])>=parseInt(i[1])&&(t=1)}else t=Validate.vaPort(a[n]);return t},Validate.vaInt=function(e,t,a){for(var n=0,i=0;i<e.length;i++)"0123456789".indexOf(e[i])<0&&(n+=1);return"undefined"!=typeof t&&(t=parseInt(t),parseInt(e)<t?n+=1:"undefined"!=typeof a&&parseInt(e)>a&&(n+=1)),n},Validate.vaFloat=function(e){var t=0;if(0===e.length)t=1;else for(var a=0;a<e.length;a++)"0123456789.".indexOf(e[a])<0?t=1:e.split(".").length>2&&(t=1);return t},Validate.vaLength=function(e,t,a){var n=0;return e=$.trim(e),"undefined"!=typeof t?e.length<t?n=1:"undefined"!=typeof a&&e.length>a&&(n=1):0===e.length&&(n=1),n},Validate.setSubmitBtn=function(e){var t=0;return e.find(".form-group").each(function(){$(this).hasClass("has-error")&&(t+=1)}),e.find('[type="submit"]').prop("disabled",!!t),t},Validate.checkInput=function(){for(var e=$(this).prop("id"),t=$($(this).get(0).form),a=t.find(".form-group:has(#"+e+")"),n=$(this).attr("data-validate").split("-"),i=$(this).val(),s=0,o=0;o<n.length;o++){var l=n[o].split("_");l.shift(),l.unshift(i),n[o]=n[o].split("_")[0],Validate[n[o]].apply(null,l)&&(s+=1)}s?(a.addClass("has-error"),a.find(".help-block").removeClass("hidden")):(a.removeClass("has-error"),a.find(".help-block").addClass("hidden")),Validate.setSubmitBtn(t),Ha.setFooterPosition()};